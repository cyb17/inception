# syntax=docker/dockerfile:1

FROM Debian:11

RUN apt update \
	&& apt install nginx openssl \
	# generer un certificat type auto-signe(x509) et une clee RSA de 2048 bits
	# utilise l'algo sha256 pour le signer , d'une duree de validite d'ans
	&& openssl req -x509 -newkey rsa:2048 -keyout ../tools/key.pem -out ../tools/cert.pem -sha256 -days 365

WORKDIR ./

COPY conf/nginx.conf 


SHELL ["/bin/bash", "-c"]